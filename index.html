<!DOCTYPE html>
<html>
<head>
	<title>DEMO: Rice Room Interactive</title>
	<meta name="viewport" content="target-densitydpi=device-dpi, 
                                   width=device-width, 
                                   initial-scale=1.0, 
                                   minimum-scale=1.0, 
                                   maximum-scale=1.0, 
                                   minimal-ui, 
                                   user-scalable=no" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black" />
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
	<meta http-equiv="x-ua-compatible" content="IE=edge" />

    <link href="./css/main.css" rel="stylesheet" />
</head>
<body>
    <script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
    <script src="2015_05_26TT005-HDR_2015_05_26TT056-HDR_18_20226x7842_cropped.js"></script>
    <script src="./js/jquery.panzoom.js"></script>
    <script src="./js/hammer.min.js"></script>

    <div id="desk" class="modal hidden">
        <a href="javascript:void(0);" class="close">&times;</a>
        <div class="modal-container">
            <div id="hammer" class="media">
                <img src="images/writing-table.jpg" />
            </div>
            <div class="metadata">
                <h1>Writing Table</h1>
                <label>Geography</label>
                <p>Made in Paris, France, Europe</p>

                <label>Date</label>
                <p>1783</p>
                
                <label>Medium</label>
                <p>Oak with mahogany, sycamore, satinwood, boxwood, ebony, and other wood veneers; gilded bronze mounts</p>

                <label>Label</label>
                <p>This table was made for Marie-Antoinette (queen of France 1774-93) and delivered to her at the royal ch√¢teau at Marly, near Versailles.</p>

                <label>Credit</label>
                <p>Bequest of Eleanore Elkins Rice, 1939</p>
            </div>
        </div>
    </div>
    <div id="carpet" class="modal hidden">
        <a href="javascript:void(0);" class="close">&times;</a>
        <div class="modal-container">
            <div id="hammer" class="media">
                <img src="images/carpet.jpg" />
            </div>
            <div class="metadata">
                <h1>Carpet</h1>
                <label>Geography</label>
                <p>Made in Paris, France, Europe</p>

                <label>Date</label>
                <p>1668-1685</p>
                
                <label>Medium</label>
                <p>Wool and linen</p>

                <label>Label</label>
                <p>This carpet is from a set of ninety-three rugs made for the Grande Galerie of the Louvre. In the center are four of King Louis XIV's double L monograms intertwined beneath crowns; at each end, flanked by eagles, appears a crowned globe with the royal motto "Nec Pluribus Impar" (Unequalled Among Many).</p>
                <p>This is one of ninety-three carpets commissioned by Louis XIV for the long gallery that joined the Louvre and Tuileries palaces in Paris. Among the grandest weaving projects in European history, the scheme required carpets of the then-unprecedented length of over 29 feet each to be laid in two rows along the 1,450-foot gallery. Using specially built large looms housed in newly constructed buildings, two rival workshops in the royal Savonnerie carpet manufactory worked simultaneously on the project from 1668 to 1685. In scale and splendor the suite of carpets is comparable to the king's other celebrated achievements, such as the gardens at Versailles. The center of the present carpet, twenty-sixth in the series, is filled with four of the king's double-L monograms intertwined beneath crowns; a crowned globe inscribed with the royal motto and flanked by eagles appears at each end. This carpet, which has been shortened at one end with the border reattached, was one of a pair of the same design. Katherine B. Hiesinger, from Philadelphia Museum of Art: Handbook of the Collections (1995), p.134.</p>

                <label>Credit</label>
                <p>Bequest of Eleanore Elkins Rice, 1939</p>
            </div>
        </div>
    </div>
    <div id="pano">
    	<noscript>
            <table style="width:100%;height:100%;">
                <tr style="vertical-align:middle;">
                    <td><div style="text-align:center;">ERROR:<br/><br/>Javascript not activated</div></td>
                </tr>
            </table>
        </noscript>
    	<script>
    		embedpano({
                swf:"2015_05_26TT005-HDR_2015_05_26TT056-HDR_18_20226x7842_cropped.swf", 
                xml:"2015_05_26TT005-HDR_2015_05_26TT056-HDR_18_20226x7842_cropped.xml", 
                target:"pano", 
                html5:"prefer", 
                passQueryParameters:true
            });
    	</script>
    </div>
    <script>
        function popModal(id) {
            $('#' + id).removeClass('hidden');
            setTimeout(function(){
                $('#' + id).addClass('in');
            }, 100);
        }
        function closeModal() {
            $(this).parent().removeClass('in');
            setTimeout(function(){
                $('.modal').addClass('hidden');
            }, 500);
        }

        $(function(){
            var $media = $('.media');
            var myElement = document.getElementById('hammer');
            var hammer = new Hammer(myElement);

            $(document).on('click', '.modal .close', closeModal);
            hammer.on('doubletap', function(e) { e.preventDefault(); $media.panzoom('zoomIn'); });
            
            $media.panzoom({
                startTransform: 'scale(1)',
                increment: 0.3,
                minScale: 1,
                contain: 'invert'
            });
            $media.on('mousewheel.focal', function( e ) {
                e.preventDefault();
                var delta = e.delta || e.originalEvent.wheelDelta;
                var zoomOut = delta ? delta < 0 : e.originalEvent.deltaY > 0;
                $media.panzoom('zoom', zoomOut, {
                    increment: 0.2,
                    animate: true,
                    focal: e
                });
            });
        });
    </script>
</body>
</html>
