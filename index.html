<!DOCTYPE html>
<html>
<head>
	<title>Rice Room - Philadelphia Museum of Art</title>
	<meta name="viewport" content="target-densitydpi=device-dpi, 
                                   width=device-width, 
                                   initial-scale=1.0, 
                                   minimum-scale=1.0, 
                                   maximum-scale=1.0, 
                                   minimal-ui, 
                                   user-scalable=no" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black" />
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
	<meta http-equiv="x-ua-compatible" content="IE=edge" />

    <link href="./css/main.css" rel="stylesheet" />

    <link href="./images/icons/apple-touch-icon-57x57.png" rel="apple-touch-icon" />
    <link href="./images/icons/apple-touch-icon-57x57.png" rel="apple-touch-icon" sizes="57x57" />
    <link href="./images/icons/apple-touch-icon-60x60.png" rel="apple-touch-icon" sizes="60x60" />
    <link href="./images/icons/apple-touch-icon-72x72.png" rel="apple-touch-icon" sizes="72x72" />
    <link href="./images/icons/apple-touch-icon-76x76.png" rel="apple-touch-icon" sizes="76x76" />
    <link href="./images/icons/apple-touch-icon-114x114.png" rel="apple-touch-icon" sizes="114x114" />
    <link href="./images/icons/apple-touch-icon-120x120.png" rel="apple-touch-icon" sizes="120x120" />
    <link href="./images/icons/apple-touch-icon-144x144.png" rel="apple-touch-icon" sizes="144x144" />
    <link href="./images/icons/apple-touch-icon-152x152.png" rel="apple-touch-icon" sizes="152x152" />
    <link href="./images/icons/favicon.png" rel="icon" sizes="64x64" />
</head>
<body oncontextmenu="return false">
    <script id="videos-template" type="text/x-handlebars-template">
        {{#each videos}}
            <a class="video" data-poster="{{files.poster}}" data-src="{{files.source}}" data-title="{{title}}">
                <h2>{{title}}</h2>
                <img src="{{files.thumb}}" />
            </a>
        {{/each}}
        <div class="close bottom"></div>
    </script>

    <script id="modal-template" type="text/x-handlebars-template">
        <div class="modal-container">
            <div class="close left"></div>
            <video id="video" src="{{src}}" poster="{{poster}}"></video>

            <div class="video-play-button"></div>
            <div class="video-mute-button"></div>
            <h2>Now Playing: <strong>{{title}}</strong></h2>
            <input type="range" min="0" max="100" value="0" step="1" class="video-tracker" />
        </div>
    </script>

    <script id="detail-panel-template" type="text/x-handlebars-template">
        <div class="close left"></div>
        <div class="text-size right"></div>
        <div class="media-container {{#if images.[1]}}expanded{{/if}}">
            <div id="hammertime" data-id="{{id}}" class="media-container-inner media-type-{{images.0.type}}">
                <img class="zoomable" src="{{images.0.files.large}}" />
                <div class="zoomer">
                    <img src="{{images.0.files.large}}" />
                    <div class="mask"></div>
                </div>
                <span class="caption">{{images.0.caption}}</span>
            </div>
            {{#if images.[1]}}
                <ul class="media-container-thumbs">
                {{#each images}}
                    <li>
                        <a 
                            class="media-thumb"
                            href="#" 
                            data-type="{{type}}" 
                            {{#if files.large}}
                                data-src="{{files.large}}"
                            {{/if}}
                            {{#if caption}}
                                data-caption="{{caption}}"
                            {{/if}}>
                           <img src="{{files.thumb}}" />
                        </a>
                    </li>
                {{/each}}
                </ul>
            {{/if}}
        </div>
        <div class="container">
            <h1>{{content.title}} <small>{{content.date}}</small></h1>
            {{#if content.description}}
            <label>Description</label>
            <p>{{content.description}}</p>
            {{/if}}

            {{#if content.creator}}
            <label>Creator</label>
            <p>{{content.creator}}</p>
            {{/if}}

            {{#if content.location}}
            <label>Location</label>
            <p>{{content.location}}</p>
            {{/if}}

            {{#if content.medium}}
            <label>Medium</label>
            <p>{{content.medium}}</p>
            {{/if}}

            {{#if content.credit}}
            <label>Credit Line</label>
            <p>{{content.credit}}</p>
            {{/if}}

            {{#if content.accession}}
            <label>Accession</label>
            <p>{{content.accession}}</p>
            {{/if}}
        </div>
    </script>

    <script id="drawer-panel-template" type="text/x-handlebars-template">
        <div class="close left"></div>
        <div class="container">
            {{#each .}}
                <a data-id="{{id}}" class="object" style="left:{{x}}px;top:{{y}}px;">
                    <img src="{{hotspot_image}}" />
                </a>
            {{/each}}
        </div>
    </script>

    <script src="./js/lib/hammer.min.js"></script>
    <script src="./js/lib/jquery-1.11.3.min.js"></script>
    <script src="./js/lib/jquery.hammer.js"></script>
    <script src="./js/lib/preloadjs-0.6.1.min.js"></script>
    <script src="./js/lib/defiant-latest.min.js"></script>
    <script src="./js/lib/handlebars-v4.0.2.js"></script>
    
    <script src="./js/panorama.js"></script>
    <script src="./js/controllers/utilities.js"></script>
    <script src="./js/controllers/preloader.js"></script>
    <script src="./js/controllers/detail-panel.js"></script>
    <script src="./js/controllers/narrative.js"></script>
    <script src="./js/controllers/drawer.js"></script>
    <script src="./js/controllers/videos.js"></script>
    <script src="./js/controllers/modal.js"></script>
    <script src="./js/app.js"></script>
    
    <div id="captions" class="hidden">
        <div class="caption-container"></div>
    </div>
    <div id="videos">
        <a class="audio-narrative">
            <div class="audio-narrative-icon"></div>
            <span>About the Rice Room</span>
        </a>
        <a class="see-all">See All Videos</a>
        <div class="video-container"></div>
    </div>
    <div id="modal" class="hidden"></div>
    <div id="drawer-panel"></div>
    <div id="detail-panel"></div>
    <div id="hidden"></div>
    <div id="preloader" class="in">
        <div class="container">
            <img src="./images/logo.gif" />
        </div>
    </div>
    <div id="pano">
    	<script>
            var bool = false;

    		embedpano({
                swf:"panorama_right.swf",
                xml:"./jekyll-data/build/panorama.xml",
                target:"pano",
                html5:"prefer",
                passQueryParameters:true
            });
            function lookToHotspot(id){
                var krpano = document.getElementById("krpanoSWFObject");
                if (krpano && krpano.get) {
                    krpano.call("looktohotspot('" + id + "', 60);");
                }
            }
            function returnToZoom(){
                var krpano = document.getElementById("krpanoSWFObject");
                if (krpano && krpano.get) {
                    krpano.call("zoomto(90);");
                }
            }
            function resetToStart(){
                var krpano = document.getElementById("krpanoSWFObject");
                if (krpano && krpano.get) {
                    krpano.call("lookto(90,10,90);");
                }
            }
            function slowRotate(force){
                var krpano = document.getElementById("krpanoSWFObject");
                if (krpano && krpano.get) {
                    krpano.call("set(hlookat_moveforce, " + force + ");");
                }
            }
    	</script>
    </div>
</body>
</html>
